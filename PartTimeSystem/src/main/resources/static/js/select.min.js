(function(a){function b(a){if('top-start'===a.attr('x-placement')){const b=a.outerHeight(!0);a.css('transform',`translate3d(0px, -${b}px, 0px)`)}}function c(b,c,d){a(b).find('.dropdown-header, .dropdown-item').remove();const e=(c)=>{const d=c.innerText,e=a('<a href="#" class="dropdown-item"></a>').text(d);e.attr('data-index',a(c).data('index')),a(c).is('option:selected')&&e.addClass(k.activeClass),a(c).is('option:disabled')&&e.addClass(k.disabledClass),b.append(e)},f=(c)=>{const d=a(c).attr('label'),e=a('<span class="dropdown-header"></span>').text(d);b.append(e)},g=(b)=>{a(b).each((b,c)=>{if(!(d&&a(c).is(':disabled'))){if(a(c).is('optgroup')){const b=a(c).children();f(c),g(b)}a(c).is('option')&&e(c)}})};return c=c.filter((b,c)=>!d||a(c).is(':enabled')),0===c.length?void(()=>{const c=a('<span class="dropdown-header"></span>').text(k.empty);b.append(c)})():void g(c)}function d(b){const c=a(b).find('option:selected'),d=[];return c.each((a,b)=>{d.push(b.innerText)}),0===c.length?k.notSelectedTitle:d.join(', ')}function e(b,c){const e=d(b);a(c).find('.btn').text(e)}function f(b){const c=a(b),d=a(c).next(`.${h}`);e(c,d)}function g(b){if(!a(b).is('select'))throw new Error('Only <select /> elements are allowed');if(!a(b).hasClass(i)){const c=a(b).data('btn-class')||'btn-secondary',e=d(b),f=a('<button class="btn dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>').addClass(c),g=a('<div class="alert alert-danger select-extend-alert" role="alert"></div>'),j=a('<div class="dropdown-menu"></div>').append(g),k=a('<div class="dropdown"></div>').addClass(h);a(b).find('option').each((b,c)=>a(c).attr('data-index',b)),a(b).addClass(i),a(b).after(k.append(f.text(e),j))}}const h='select-extended-element',i='select-extend',j='select-search';let k={search:'Search',notSelectedTitle:'Nothing to shown',empty:'Nothing to shown',activeClass:'active',disabledClass:'disabled',maxOptionMessage:'Limit reached (%items items max)',maxOptionMessageDelay:2e3,popoverResize:!1,dropdownResize:!1};a('body').on('click',`.${h} .dropdown-menu > *`,function(b){b.preventDefault();const c=a(this).parents(2).prev(`.${i}`),d=a(this).parent(),e=c.attr('multiple'),g=c.data('max-options'),h=c.data('max-options-message')||k.maxOptionMessage,l=c.find('option:selected').length,m=a(this).data('index'),n=c.find('option[data-index="'+m+'"]');if(e&&b.stopPropagation(),!(a(this).hasClass(k.disabledClass)||a(this).hasClass('dropdown-header')||a(this).hasClass(j))){if(g&&!a(n).attr('selected')&&l>=g){const b=a(d).find('.select-extend-alert');return a(b).text(h.replace('%items',g)),a(b).fadeIn(200),void setTimeout(()=>a(b).fadeOut(200),k.maxOptionMessageDelay)}e||(c.find('option').attr('selected',!1),d.find(`.${k.activeClass}`).removeClass(k.activeClass)),a(n).attr('selected',!a(n).attr('selected')),a(this).toggleClass(k.activeClass),f(c)}}).on('show.bs.dropdown',`.${h}`,function(d){function e(b){return function(c,d){return a(d).text().toLowerCase().includes(b.toLowerCase())}}function f(){const d=a(this).val(),f=g.find('option').filter(e(d)),i=d?f:g.children();k.popoverResize||h.css('height',h.outerHeight()),c(h,i,g.data('hide-disabled')),k.popoverResize&&b(h)}const g=a(this).prev(`.${i}`),h=a(this).find('.dropdown-menu'),l=a(this).find('.btn'),m=a(g).data('live-search');if(m){const b=a(g).data('live-search-placeholder')||k.search,c=a('<input class="form-control" type="text" autofocus>').addClass(j).attr('placeholder',b);a(`.${j}`).remove(),h.append(c),h.find(`.${j}`).on('input',f)}c(h,g.children(),g.data('hide-disabled')),setTimeout(()=>a('[autofocus]',d.target).focus(),100),k.dropdownResize&&h.css('min-width',l.outerWidth())}).on('hide.bs.dropdown',`.${h}`,function(){a(this).find('.dropdown-menu .select-search').off('change')}).on('change',`.${i}`,function(){f(this)}),a.fn.extendSelect=function(b){try{b&&(k=Object.assign(k,b)),a(this).each((a,b)=>g(b))}catch(a){console.error(a)}}})(jQuery);